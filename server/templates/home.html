{% extends "loggedinheader.html" %}
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head >
</head>
{% block content %}
<body>
    <h1 id="name" align="center"> [Username]'s Monsters</h1>
    <div class="container" id="kevin">

        <button class="button button2" display inline-block; onclick="window.location.href='/myaccount'">Manage Team</button>
    </div>

    <hr />
    <div class="container">
        <button class="button" display inline-block; onclick="window.location.href='/privategame'">Play with Friends</button>
        <button class="button" display inline-block; onclick="window.location.href='/game'">Play without Friends</button>
    </div>
</body>
<script>
    var sessionData = {};
    var retrieveInfo = {};
    var deck = [];


    document.addEventListener("logged-in", function () {
        retrieveInfo = retrieveSessionData();
        $("#name").html(retrieveInfo["username"] + "'s Monsters");
    });

    function loadImages_ajax() {
        // ask for email
        var fd = new FormData();
        fd.append( 'token', retrieveLoginToken());

        $.ajax({
            url: '/cards/player_cards',
            data: fd,
            processData: false,
            contentType: false,
            type: 'POST',
            success: function(data){
                if ("error" in data) {}
                else {
                    deck = data['cards'];
                    buildDeck(deck);
                }
            }
        });
    }

    function buildDeck(deck){
        for(var i=0; i<deck.length; i++){
            var ref = `<div class="polaroid" id="one"> <img src="/cards/preview/${deck[i]}" alt="Monster 1" style="width:100%; height: 75%"> <div class="container"> <p>${"monster_name"}</p> </div> </div>`
            $("#kevin").prepend(ref)
        }
    }
</script>

{% endblock %}
</html>
